<img class="puppyBG" src="{{bgImage}}">
<main class="dark">
    <div class="overlay">
        <h1>Upload your puppy!</h1>
        <p>Show us your cutest puppy pictures!</p>
    </div>
    <div class="uploadForm">
        <form class="form-horizontal" role="form"
    enctype="multipart/form-data" method="POST"
    action="/contest/vacation-photo/{{year}}/{{month}}"> <!-- renders with current date data -->
            <div class="form-group">
                <label for="fieldName" class="col-sm-2 control-label">Name</label>
                <div class="col-sm-4">
                    <input type="text" class="form-control"
                        id="fieldName" name="name">
                </div>
            </div>
            <div class="form-group">
                <label for="fieldEmail" class="col-sm-2 control-label">Email</label>
                <div class="col-sm-4">
                    <input type="email" class="form-control" required
                        id="fieldEmail" name="email">
                </div>
            </div>
            <div class="form-group">
                <label for="fieldPhoto" class="col-sm-2 control-label">Puppy Photo</label>
                <div class="col-sm-4">
                    <span class="btn btn-default btn-file">
                    <input type="file" class="form-control" required
                        accept="image/*" id="fieldPhoto" data-url="/upload"
                        multiple name="photo">
                    </span>
                    <div id="fileUploads"></div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-4">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </form>
    </div>
    {{> navigation}}
</main>

{{#section 'jquery'}}
    {{> jquery}}
    
    <!-- load jQuery File Upload Scripts -->
    <script src="/vendor/jqfu/jquery.ui.widget.js"></script>
    <script src="/vendor/jqfu/jquery.iframe-transport.js"></script>
    <script src="/vendor/jqfu/jquery.fileupload.js"></script>
    <script>
        $(document).ready(function(){
            $('#fieldPhoto').fileupload({
                dataType: 'json',
                done: function(e, data) {
                    $.each(data.result.files, function(index, file){
                        $('#fileUploads').append($('<div class="upload">' +
                            '<span class="glyphicon glyphicon-ok"></span>' +
                            '&nbsp;' + file.originalName + '</div>'));
                    });
                }
            });
        });
    </script>
{{/section}}